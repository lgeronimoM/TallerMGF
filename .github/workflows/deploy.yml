# .github/workflows/deploy.yml
name: Deploy TallerMGF to Local Kubernetes

on:
  push:
    branches: [ master ]

jobs:
  deploy:
    runs-on: self-hosted  # Tu runner local sigue igual
    
    steps:
    - name: Checkout c√≥digo
      uses: actions/checkout@v4

    - name: Construir imagen
      run: docker build -t tallermgf:latest .

    - name: Aplicar manifiestos
      run: |
        kubectl apply -f k8s/namespace.yaml
        kubectl apply -f k8s/deployment.yaml
        kubectl apply -f k8s/service.yaml
        kubectl apply -f k8s/ingress.yaml

    - name: Verificar
      run: kubectl get pods -n tallermgf
